{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Navigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function ProtectedRoute(_ref){let{children,allowedRoles}=_ref;const[loading,setLoading]=useState(true);const[authorized,setAuthorized]=useState(false);useEffect(()=>{const checkAuth=async()=>{try{const res=await fetch(\"http://localhost:5000/check-auth\",{credentials:\"include\"});const data=await res.json();if(res.ok&&allowedRoles.includes(data.role)){setAuthorized(true);}else{setAuthorized(false);}}catch(_unused){setAuthorized(false);}finally{setLoading(false);}};checkAuth();},[allowedRoles]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"text-white text-center mt-20\",children:\"Checking authentication...\"});if(!authorized)return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});return children;}","map":{"version":3,"names":["React","useEffect","useState","Navigate","jsx","_jsx","ProtectedRoute","_ref","children","allowedRoles","loading","setLoading","authorized","setAuthorized","checkAuth","res","fetch","credentials","data","json","ok","includes","role","_unused","className","to","replace"],"sources":["D:/my-dashboard/src/components/ProtectedRoute.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nexport default function ProtectedRoute({ children, allowedRoles }) {\r\n  const [loading, setLoading] = useState(true);\r\n  const [authorized, setAuthorized] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      try {\r\n        const res = await fetch(\"http://localhost:5000/check-auth\", {\r\n          credentials: \"include\",\r\n        });\r\n        const data = await res.json();\r\n        if (res.ok && allowedRoles.includes(data.role)) {\r\n          setAuthorized(true);\r\n        } else {\r\n          setAuthorized(false);\r\n        }\r\n      } catch {\r\n        setAuthorized(false);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    checkAuth();\r\n  }, [allowedRoles]);\r\n\r\n  if (loading) return <div className=\"text-white text-center mt-20\">Checking authentication...</div>;\r\n  if (!authorized) return <Navigate to=\"/login\" replace />;\r\n\r\n  return children;\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,QAAQ,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5C,cAAe,SAAS,CAAAC,cAAcA,CAAAC,IAAA,CAA6B,IAA5B,CAAEC,QAAQ,CAAEC,YAAa,CAAC,CAAAF,IAAA,CAC/D,KAAM,CAACG,OAAO,CAAEC,UAAU,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACU,UAAU,CAAEC,aAAa,CAAC,CAAGX,QAAQ,CAAC,KAAK,CAAC,CAEnDD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAa,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,kCAAkC,CAAE,CAC1DC,WAAW,CAAE,SACf,CAAC,CAAC,CACF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAH,GAAG,CAACI,IAAI,CAAC,CAAC,CAC7B,GAAIJ,GAAG,CAACK,EAAE,EAAIX,YAAY,CAACY,QAAQ,CAACH,IAAI,CAACI,IAAI,CAAC,CAAE,CAC9CT,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,IAAM,CACLA,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAE,MAAAU,OAAA,CAAM,CACNV,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CACDG,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACL,YAAY,CAAC,CAAC,CAElB,GAAIC,OAAO,CAAE,mBAAOL,IAAA,QAAKmB,SAAS,CAAC,8BAA8B,CAAAhB,QAAA,CAAC,4BAA0B,CAAK,CAAC,CAClG,GAAI,CAACI,UAAU,CAAE,mBAAOP,IAAA,CAACF,QAAQ,EAACsB,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CAExD,MAAO,CAAAlB,QAAQ,CACjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}